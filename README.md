# IndexTTS2 å­¦ä¹ ä¸å®è·µé¡¹ç›®

æ¬¢è¿æ¥åˆ° IndexTTS2 å­¦ä¹ é¡¹ç›®ï¼è¿™æ˜¯ä¸€ä¸ªåŸºäºç´¢å¼•æœºåˆ¶çš„æ–‡æœ¬è½¬è¯­éŸ³ï¼ˆTTSï¼‰ç³»ç»Ÿï¼Œæ”¯æŒé›¶æ ·æœ¬è¯­éŸ³å…‹éš†ã€‚

## ğŸ¯ é¡¹ç›®ç›®æ ‡

**ä¸ºè§†é¢‘åˆ¶ä½œå¿«é€Ÿç”Ÿæˆé…éŸ³** - ä½¿ç”¨ IndexTTS2 å°†æ–‡æ¡ˆè½¬æ¢ä¸ºè‡ªç„¶è¯­éŸ³ï¼Œæ›¿ä»£è€—æ—¶çš„äººå·¥å½•åˆ¶ï¼Œå¤§å¹…æå‡è§†é¢‘åˆ¶ä½œæ•ˆç‡ã€‚

### ä½¿ç”¨åœºæ™¯
- ğŸ“ æ–‡æ¡ˆç¼–è¾‘ â†’ ğŸ™ï¸ IndexTTS2ç”Ÿæˆé…éŸ³ â†’ âœ‚ï¸ å‰ªæ˜ ç¼–è¾‘ â†’ ğŸ“± æŠ–éŸ³å‘å¸ƒ
- ä»1-2å°æ—¶ç¼©çŸ­åˆ°å‡ åˆ†é’Ÿ
- æ”¯æŒæƒ…ç»ªæ§åˆ¶å’Œè¯­éŸ³å…‹éš†

## ğŸ“š é¡¹ç›®ç»“æ„

```
IndexTTS2/
â”œâ”€â”€ configs/              # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ train/           # è®­ç»ƒé…ç½®
â”‚   â”œâ”€â”€ inference/       # æ¨ç†é…ç½®
â”‚   â””â”€â”€ video_dubbing/   # è§†é¢‘é…éŸ³é…ç½®ï¼ˆæƒ…ç»ªæ¨¡æ¿ç­‰ï¼‰
â”œâ”€â”€ data/                # æ•°æ®ç›®å½•
â”‚   â”œâ”€â”€ raw/             # åŸå§‹æ•°æ®
â”‚   â”œâ”€â”€ processed/       # å¤„ç†åçš„æ•°æ®
â”‚   â””â”€â”€ datasets/        # è®­ç»ƒæ•°æ®é›†
â”œâ”€â”€ models/              # æ¨¡å‹å®šä¹‰
â”‚   â”œâ”€â”€ encoder/         # ç¼–ç å™¨
â”‚   â”œâ”€â”€ decoder/         # è§£ç å™¨
â”‚   â”œâ”€â”€ index/           # ç´¢å¼•æœºåˆ¶
â”‚   â””â”€â”€ vocoder/         # å£°ç å™¨
â”œâ”€â”€ utils/               # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ audio/           # éŸ³é¢‘å¤„ç†
â”‚   â”œâ”€â”€ text/            # æ–‡æœ¬å¤„ç†
â”‚   â””â”€â”€ visualization/   # å¯è§†åŒ–
â”œâ”€â”€ scripts/              # è„šæœ¬
â”‚   â”œâ”€â”€ train/           # è®­ç»ƒè„šæœ¬
â”‚   â”œâ”€â”€ inference/       # æ¨ç†è„šæœ¬
â”‚   â”œâ”€â”€ video_dubbing/   # è§†é¢‘é…éŸ³ä¸“ç”¨è„šæœ¬ â­
â”‚   â”œâ”€â”€ preprocess/      # é¢„å¤„ç†è„šæœ¬
â”‚   â””â”€â”€ eval/            # è¯„ä¼°è„šæœ¬
â”œâ”€â”€ checkpoints/          # æ¨¡å‹æ£€æŸ¥ç‚¹
â”‚   â”œâ”€â”€ pretrained/      # é¢„è®­ç»ƒæ¨¡å‹
â”‚   â””â”€â”€ training/        # è®­ç»ƒä¸­çš„æ¨¡å‹
â”œâ”€â”€ outputs/              # è¾“å‡ºç»“æœ
â”‚   â”œâ”€â”€ audio/           # ç”Ÿæˆçš„éŸ³é¢‘
â”‚   â”œâ”€â”€ logs/            # æ—¥å¿—æ–‡ä»¶
â”‚   â””â”€â”€ figures/         # å›¾è¡¨
â”œâ”€â”€ docs/                 # æ–‡æ¡£
â”‚   â”œâ”€â”€ learning/        # å­¦ä¹ æ–‡æ¡£
â”‚   â”œâ”€â”€ ç”¨æˆ·ç›®æ ‡å’Œä½¿ç”¨åœºæ™¯.md  # é¡¹ç›®ç›®æ ‡ â­
â”‚   â”œâ”€â”€ ç¯å¢ƒæ£€æŸ¥æŠ¥å‘Š.md        # ç¯å¢ƒä¿¡æ¯ â­
â”‚   â””â”€â”€ Mac_M2ç¯å¢ƒé…ç½®æŒ‡å—.md  # Mac M2é€‚é… â­
â”œâ”€â”€ tests/                # æµ‹è¯•
â”œâ”€â”€ notebooks/            # Jupyter notebooks
â”œâ”€â”€ experiments/          # å®éªŒè®°å½•
â””â”€â”€ deployment/            # éƒ¨ç½²ç›¸å…³
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒé…ç½®

#### Mac M2 ç”¨æˆ·ï¼ˆApple Siliconï¼‰
```bash
# ä½¿ç”¨é€‚é…è„šæœ¬
./setup.sh

# æˆ–æŸ¥çœ‹è¯¦ç»†æŒ‡å—
cat docs/Mac_M2ç¯å¢ƒé…ç½®æŒ‡å—.md
```

#### å…¶ä»–ç³»ç»Ÿ
```bash
# ä½¿ç”¨å®‰è£…è„šæœ¬
./setup.sh

# æˆ–æ‰‹åŠ¨å®‰è£…
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

### 2. éªŒè¯å®‰è£…
```bash
# æ£€æŸ¥ PyTorch å’Œ MPSï¼ˆMac M2ï¼‰
python3 -c "import torch; print('PyTorch:', torch.__version__); print('MPSå¯ç”¨:', torch.backends.mps.is_available() if hasattr(torch.backends, 'mps') else False)"

# æ£€æŸ¥éŸ³é¢‘åº“
python3 -c "import librosa; print('éŸ³é¢‘åº“OK')"
```

### 3. è§†é¢‘é…éŸ³å¿«é€Ÿå¼€å§‹

```bash
# ç”Ÿæˆé…éŸ³ï¼ˆä¸“ä¸ºå‰ªæ˜ è®¾è®¡ï¼‰
python scripts/video_dubbing/dubbing_for_video.py \
    --text "ä½ çš„æ–‡æ¡ˆå†…å®¹" \
    --reference_audio data/reference/your_voice.wav \
    --output outputs/audio/dubbing.wav \
    --emotion happy \
    --speed 1.0 \
    --checkpoint checkpoints/pretrained/model.pth
```

## ğŸ“– å­¦ä¹ è·¯å¾„

### é’ˆå¯¹è§†é¢‘é…éŸ³çš„ç›®æ ‡ç”¨æˆ·

1. **ç¬¬1æ­¥ï¼šç¯å¢ƒé…ç½®**ï¼ˆ30åˆ†é’Ÿï¼‰
   - [ç¯å¢ƒé…ç½®æŒ‡å—](docs/learning/01-ç¯å¢ƒé…ç½®/README.md)
   - [Mac M2 ç‰¹æ®Šé…ç½®](docs/Mac_M2ç¯å¢ƒé…ç½®æŒ‡å—.md)

2. **ç¬¬2æ­¥ï¼šå‡†å¤‡å£°éŸ³æ ·æœ¬**ï¼ˆ1å°æ—¶ï¼‰
   - å½•åˆ¶è‡ªå·±çš„å£°éŸ³æ ·æœ¬ï¼ˆ5-10åˆ†é’Ÿæ¸…æ™°å½•éŸ³ï¼‰
   - ç”¨äºè¯­éŸ³å…‹éš†

3. **ç¬¬3æ­¥ï¼šç”Ÿæˆç¬¬ä¸€ä¸ªé…éŸ³**ï¼ˆ15åˆ†é’Ÿï¼‰
   - ä½¿ç”¨é¢„è®­ç»ƒæ¨¡å‹æˆ–è®­ç»ƒè‡ªå·±çš„æ¨¡å‹
   - æµ‹è¯•æƒ…ç»ªæ§åˆ¶åŠŸèƒ½

4. **ç¬¬4æ­¥ï¼šé›†æˆåˆ°å·¥ä½œæµ**ï¼ˆæŒç»­ä¼˜åŒ–ï¼‰
   - æ‰¹é‡å¤„ç†å¤šä¸ªæ–‡æ¡ˆ
   - ä¼˜åŒ–å‰ªæ˜ å¯¼å…¥æµç¨‹

è¯¦ç»†å­¦ä¹ æ–‡æ¡£ä½äº `docs/learning/` ç›®å½•ã€‚

## ğŸ¬ è§†é¢‘é…éŸ³åŠŸèƒ½

### æ ¸å¿ƒåŠŸèƒ½
- âœ… **æ–‡æœ¬è½¬è¯­éŸ³**: å°†æ–‡æ¡ˆè½¬æ¢ä¸ºè‡ªç„¶è¯­éŸ³
- âœ… **è¯­éŸ³å…‹éš†**: ä½¿ç”¨è‡ªå·±çš„å£°éŸ³æ ·æœ¬
- âœ… **æƒ…ç»ªæ§åˆ¶**: è°ƒæ•´æƒ…ç»ªã€è¯­é€Ÿã€éŸ³è°ƒ
- âœ… **å‰ªæ˜ å…¼å®¹**: å¯¼å‡ºå‰ªæ˜ å¯ç›´æ¥ä½¿ç”¨çš„æ ¼å¼

### æƒ…ç»ªæ¨¡æ¿
é¢„å®šä¹‰çš„æƒ…ç»ªæ¨¡æ¿ï¼ˆ`configs/video_dubbing/emotion_templates.yaml`ï¼‰ï¼š
- `neutral` - ä¸­æ€§
- `happy` - å¼€å¿ƒ
- `excited` - å…´å¥‹
- `calm` - å¹³é™
- `professional` - ä¸“ä¸š
- `friendly` - å‹å¥½

### ä½¿ç”¨ç¤ºä¾‹

```bash
# åŸºç¡€ä½¿ç”¨
python scripts/video_dubbing/dubbing_for_video.py \
    --text "æ¬¢è¿å…³æ³¨æˆ‘çš„æŠ–éŸ³è´¦å·" \
    --reference_audio data/reference/my_voice.wav \
    --output outputs/audio/dubbing.wav \
    --emotion friendly \
    --checkpoint checkpoints/pretrained/model.pth

# æ‰¹é‡å¤„ç†
python scripts/video_dubbing/batch_dubbing.py \
    --input_file data/scripts.csv \
    --reference_audio data/reference/my_voice.wav \
    --output_dir outputs/audio/batch/ \
    --checkpoint checkpoints/pretrained/model.pth
```

## ğŸ› ï¸ å¸¸ç”¨å‘½ä»¤

### è®­ç»ƒ
```bash
python scripts/train/train.py \
    --config configs/train/default.yaml \
    --gpu 0
```

### æ¨ç†
```bash
python scripts/inference/inference.py \
    --text "æ–‡æœ¬å†…å®¹" \
    --reference_audio ref.wav \
    --output out.wav \
    --checkpoint model.pth
```

### è§†é¢‘é…éŸ³ï¼ˆæ¨èï¼‰
```bash
python scripts/video_dubbing/dubbing_for_video.py \
    --text "æ–‡æ¡ˆ" \
    --reference_audio ref.wav \
    --output out.wav \
    --emotion happy \
    --checkpoint model.pth
```

## ğŸ“ é‡è¦æ–‡æ¡£

- [æ–‡æ¡£ç´¢å¼•](docs/README.md) - å®Œæ•´æ–‡æ¡£ç›®å½• â­
- [å¿«é€Ÿå¼€å§‹æŒ‡å—](å¿«é€Ÿå¼€å§‹.md) - å¿«é€Ÿä¸Šæ‰‹æŒ‡å—
- [ç¯å¢ƒé…ç½®å®Œæ•´æŒ‡å—](docs/ç¯å¢ƒé…ç½®/ç¯å¢ƒé…ç½®å®Œæ•´æŒ‡å—.md) - Mac M2 ç¯å¢ƒé…ç½® â­
- [ç”¨æˆ·ç›®æ ‡å’Œä½¿ç”¨åœºæ™¯](docs/ç”¨æˆ·ç›®æ ‡å’Œä½¿ç”¨åœºæ™¯.md) - é¡¹ç›®ç›®æ ‡å’Œä¸šåŠ¡åœºæ™¯
- [Mac M2 ç¯å¢ƒé…ç½®æŒ‡å—](docs/Mac_M2ç¯å¢ƒé…ç½®æŒ‡å—.md) - Apple Silicon é€‚é…
- [é¡¹ç›®ç»“æ„è¯´æ˜](docs/é¡¹ç›®ç»“æ„è¯´æ˜.md) - è¯¦ç»†ç»“æ„è¯´æ˜

## ğŸ”§ é…ç½®è¯´æ˜

é…ç½®æ–‡ä»¶ä½äº `configs/` ç›®å½•ï¼š
- `configs/train/default.yaml` - è®­ç»ƒé…ç½®
- `configs/inference/default.yaml` - æ¨ç†é…ç½®
- `configs/video_dubbing/emotion_templates.yaml` - æƒ…ç»ªæ¨¡æ¿ â­

## ğŸ› é—®é¢˜æ’æŸ¥

é‡åˆ°é—®é¢˜ï¼ŸæŸ¥çœ‹ï¼š
- [é—®é¢˜æ’æŸ¥æ–‡æ¡£](docs/learning/07-é—®é¢˜æ’æŸ¥/README.md)
- [ç¯å¢ƒé…ç½®å®Œæ•´æŒ‡å—](docs/ç¯å¢ƒé…ç½®/ç¯å¢ƒé…ç½®å®Œæ•´æŒ‡å—.md) - åŒ…å«å¸¸è§é—®é¢˜
- [ç¯å¢ƒé—®é¢˜è·Ÿè¸ª](docs/ç¯å¢ƒé…ç½®/ç¯å¢ƒé—®é¢˜è·Ÿè¸ª.md) - å·²è§£å†³å’Œå¾…è§£å†³çš„é—®é¢˜
- [Mac M2 ç¯å¢ƒé…ç½®æŒ‡å—](docs/Mac_M2ç¯å¢ƒé…ç½®æŒ‡å—.md)

## ğŸ“Š ä¸šåŠ¡ä»·å€¼

### æ—¶é—´èŠ‚çœ
- **åŸæ¥**: 1-2å°æ—¶/è§†é¢‘ï¼ˆäººå·¥å½•åˆ¶ï¼‰
- **ç°åœ¨**: 5-10åˆ†é’Ÿ/è§†é¢‘ï¼ˆAIç”Ÿæˆï¼‰
- **èŠ‚çœ**: çº¦90%çš„æ—¶é—´

### å†…å®¹äº§å‡º
- æ›´å¿«é€Ÿçš„è§†é¢‘åˆ¶ä½œ
- æé«˜å†…å®¹æ›´æ–°é¢‘ç‡
- å¢åŠ æŠ–éŸ³æ›å…‰æœºä¼š

## ğŸ“„ è®¸å¯è¯

[æ ¹æ®å®é™…æƒ…å†µæ·»åŠ è®¸å¯è¯ä¿¡æ¯]

## ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸º IndexTTS2 é¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…å’Œç ”ç©¶è€…ã€‚

---

**å¼€å§‹ä½ çš„è§†é¢‘é…éŸ³ä¹‹æ—…ï¼** ğŸ‰

**æç¤º**: Mac M2 ç”¨æˆ·è¯·å…ˆæŸ¥çœ‹ [Mac M2 ç¯å¢ƒé…ç½®æŒ‡å—](docs/Mac_M2ç¯å¢ƒé…ç½®æŒ‡å—.md)
