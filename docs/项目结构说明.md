# é¡¹ç›®ç»“æ„è¯´æ˜

## ç›®å½•ç»“æ„è¯¦è§£

### ğŸ“ æ ¹ç›®å½•æ–‡ä»¶

- `README.md` - é¡¹ç›®ä¸»æ–‡æ¡£
- `requirements.txt` - Pythonä¾èµ–åŒ…åˆ—è¡¨
- `environment.yml` - Condaç¯å¢ƒé…ç½®
- `setup.sh` - ä¸€é”®å®‰è£…è„šæœ¬
- `Dockerfile` - Dockeré•œåƒæ„å»ºæ–‡ä»¶
- `docker-compose.yml` - Docker Composeé…ç½®
- `.gitignore` - Gitå¿½ç•¥æ–‡ä»¶é…ç½®

### ğŸ“ configs/ - é…ç½®æ–‡ä»¶ç›®å½•

å­˜æ”¾æ‰€æœ‰é…ç½®æ–‡ä»¶ï¼Œä½¿ç”¨YAMLæ ¼å¼ã€‚

```
configs/
â”œâ”€â”€ train/          # è®­ç»ƒç›¸å…³é…ç½®
â”‚   â””â”€â”€ default.yaml
â”œâ”€â”€ inference/      # æ¨ç†ç›¸å…³é…ç½®
â”‚   â””â”€â”€ default.yaml
â””â”€â”€ model/          # æ¨¡å‹æ¶æ„é…ç½®
```

**ç”¨é€”**:
- è®­ç»ƒæ—¶æŒ‡å®šæ¨¡å‹å‚æ•°ã€æ•°æ®è·¯å¾„ã€è¶…å‚æ•°ç­‰
- æ¨ç†æ—¶æŒ‡å®šæ¨¡å‹è·¯å¾„ã€è¾“å‡ºæ ¼å¼ç­‰
- ä¾¿äºå®éªŒç®¡ç†å’Œå‚æ•°å¯¹æ¯”

### ğŸ“ data/ - æ•°æ®ç›®å½•

```
data/
â”œâ”€â”€ raw/                    # åŸå§‹æ•°æ®ï¼ˆä¸æäº¤åˆ°Gitï¼‰
â”‚   â”œâ”€â”€ audio/              # åŸå§‹éŸ³é¢‘æ–‡ä»¶
â”‚   â””â”€â”€ transcripts/        # åŸå§‹æ–‡æœ¬æ ‡æ³¨
â”œâ”€â”€ processed/              # å¤„ç†åçš„æ•°æ®
â”‚   â”œâ”€â”€ features/           # æå–çš„ç‰¹å¾
â”‚   â””â”€â”€ metadata.json       # æ•°æ®å…ƒä¿¡æ¯
â””â”€â”€ datasets/               # è®­ç»ƒæ•°æ®é›†
    â”œâ”€â”€ train/              # è®­ç»ƒé›†
    â”œâ”€â”€ val/                # éªŒè¯é›†
    â””â”€â”€ test/               # æµ‹è¯•é›†
```

**æ³¨æ„äº‹é¡¹**:
- `raw/` å’Œ `processed/` ä¸­çš„å®é™…æ•°æ®æ–‡ä»¶ä¸ä¼šæäº¤åˆ°Git
- ä½¿ç”¨ `.gitkeep` æ–‡ä»¶ä¿æŒç›®å½•ç»“æ„

### ğŸ“ models/ - æ¨¡å‹å®šä¹‰

```
models/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ indextts2.py           # ä¸»æ¨¡å‹ç±»
â”œâ”€â”€ encoder/                # ç¼–ç å™¨æ¨¡å—
â”‚   â”œâ”€â”€ text_encoder.py    # æ–‡æœ¬ç¼–ç å™¨
â”‚   â””â”€â”€ speech_encoder.py   # è¯­éŸ³ç¼–ç å™¨
â”œâ”€â”€ decoder/                # è§£ç å™¨æ¨¡å—
â”‚   â””â”€â”€ decoder.py
â”œâ”€â”€ index/                  # ç´¢å¼•æœºåˆ¶
â”‚   â””â”€â”€ index_mechanism.py
â””â”€â”€ vocoder/                # å£°ç å™¨
    â””â”€â”€ vocoder.py
```

**è®¾è®¡åŸåˆ™**:
- æ¨¡å—åŒ–è®¾è®¡ï¼Œæ¯ä¸ªç»„ä»¶ç‹¬ç«‹
- ä¾¿äºæ›¿æ¢å’Œæ‰©å±•
- æ¸…æ™°çš„æ¥å£å®šä¹‰

### ğŸ“ utils/ - å·¥å…·å‡½æ•°

```
utils/
â”œâ”€â”€ audio/                  # éŸ³é¢‘å¤„ç†å·¥å…·
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ audio_utils.py      # éŸ³é¢‘åŠ è½½ã€ä¿å­˜ã€ç‰¹å¾æå–
â”œâ”€â”€ text/                   # æ–‡æœ¬å¤„ç†å·¥å…·
â”‚   â””â”€â”€ text_utils.py       # æ–‡æœ¬é¢„å¤„ç†ã€åˆ†è¯ç­‰
â””â”€â”€ visualization/          # å¯è§†åŒ–å·¥å…·
    â””â”€â”€ vis_utils.py         # ç»˜åˆ¶é¢‘è°±å›¾ã€æ³¢å½¢ç­‰
```

**ç”¨é€”**:
- æä¾›é€šç”¨çš„å·¥å…·å‡½æ•°
- é¿å…ä»£ç é‡å¤
- ç»Ÿä¸€çš„æ•°æ®å¤„ç†æ¥å£

### ğŸ“ scripts/ - è„šæœ¬ç›®å½•

```
scripts/
â”œâ”€â”€ train/                  # è®­ç»ƒè„šæœ¬
â”‚   â””â”€â”€ train.py           # ä¸»è®­ç»ƒè„šæœ¬
â”œâ”€â”€ inference/              # æ¨ç†è„šæœ¬
â”‚   â”œâ”€â”€ inference.py       # å•å¥æ¨ç†
â”‚   â””â”€â”€ batch_inference.py # æ‰¹é‡æ¨ç†
â”œâ”€â”€ preprocess/              # é¢„å¤„ç†è„šæœ¬
â”‚   â”œâ”€â”€ audio_normalize.py # éŸ³é¢‘æ ‡å‡†åŒ–
â”‚   â”œâ”€â”€ text_preprocess.py # æ–‡æœ¬é¢„å¤„ç†
â”‚   â””â”€â”€ extract_features.py # ç‰¹å¾æå–
â””â”€â”€ eval/                   # è¯„ä¼°è„šæœ¬
    â””â”€â”€ evaluate.py        # æ¨¡å‹è¯„ä¼°
```

**ä½¿ç”¨æ–¹å¼**:
- é€šè¿‡å‘½ä»¤è¡Œå‚æ•°ä¼ é€’é…ç½®
- æ”¯æŒé…ç½®æ–‡ä»¶
- æä¾›è¯¦ç»†çš„å¸®åŠ©ä¿¡æ¯

### ğŸ“ checkpoints/ - æ¨¡å‹æ£€æŸ¥ç‚¹

```
checkpoints/
â”œâ”€â”€ pretrained/             # é¢„è®­ç»ƒæ¨¡å‹
â”‚   â””â”€â”€ model.pth
â””â”€â”€ training/               # è®­ç»ƒä¸­çš„æ£€æŸ¥ç‚¹
    â”œâ”€â”€ checkpoint_epoch_10.pth
    â”œâ”€â”€ checkpoint_epoch_20.pth
    â””â”€â”€ best_model.pth
```

**ç®¡ç†å»ºè®®**:
- å®šæœŸæ¸…ç†æ—§çš„æ£€æŸ¥ç‚¹
- ä¿ç•™æœ€ä½³æ¨¡å‹å’Œæœ€æ–°æ¨¡å‹
- ä½¿ç”¨ç‰ˆæœ¬æ§åˆ¶ï¼ˆå¦‚Git LFSï¼‰ç®¡ç†å¤§æ–‡ä»¶

### ğŸ“ outputs/ - è¾“å‡ºç»“æœ

```
outputs/
â”œâ”€â”€ audio/                  # ç”Ÿæˆçš„éŸ³é¢‘
â”‚   â”œâ”€â”€ inference/          # æ¨ç†ç»“æœ
â”‚   â””â”€â”€ training/           # è®­ç»ƒè¿‡ç¨‹ä¸­çš„æ ·æœ¬
â”œâ”€â”€ logs/                   # æ—¥å¿—æ–‡ä»¶
â”‚   â””â”€â”€ tensorboard/        # TensorBoardæ—¥å¿—
â””â”€â”€ figures/                # å›¾è¡¨
    â”œâ”€â”€ spectrograms/        # é¢‘è°±å›¾
    â””â”€â”€ training_curves/     # è®­ç»ƒæ›²çº¿
```

### ğŸ“ docs/ - æ–‡æ¡£ç›®å½•

```
docs/
â”œâ”€â”€ learning/               # å­¦ä¹ æ–‡æ¡£ï¼ˆæŒ‰é¡ºåºå­¦ä¹ ï¼‰
â”‚   â”œâ”€â”€ 01-ç¯å¢ƒé…ç½®/
â”‚   â”œâ”€â”€ 02-æ•°æ®å‡†å¤‡/
â”‚   â”œâ”€â”€ 03-æ¨¡å‹ç†è§£/
â”‚   â”œâ”€â”€ 04-è®­ç»ƒå®è·µ/
â”‚   â”œâ”€â”€ 05-æ¨ç†ä½¿ç”¨/
â”‚   â”œâ”€â”€ 06-é«˜çº§åº”ç”¨/
â”‚   â””â”€â”€ 07-é—®é¢˜æ’æŸ¥/
â”œâ”€â”€ api/                    # APIæ–‡æ¡£
â””â”€â”€ examples/               # ç¤ºä¾‹ä»£ç 
```

### ğŸ“ tests/ - æµ‹è¯•ç›®å½•

```
tests/
â”œâ”€â”€ unit/                   # å•å…ƒæµ‹è¯•
â”‚   â”œâ”€â”€ test_models.py
â”‚   â””â”€â”€ test_utils.py
â””â”€â”€ integration/            # é›†æˆæµ‹è¯•
    â””â”€â”€ test_pipeline.py
```

### ğŸ“ notebooks/ - Jupyter Notebooks

ç”¨äºå®éªŒã€æ¢ç´¢æ€§åˆ†æå’Œå¯è§†åŒ–ã€‚

**å»ºè®®**:
- æ¯ä¸ªnotebookä¸“æ³¨äºä¸€ä¸ªä¸»é¢˜
- ä½¿ç”¨æœ‰æ„ä¹‰çš„å‘½å
- æ·»åŠ æ¸…æ™°çš„è¯´æ˜

### ğŸ“ experiments/ - å®éªŒè®°å½•

```
experiments/
â”œâ”€â”€ exp_001_baseline/       # å®éªŒ1ï¼šåŸºçº¿æ¨¡å‹
â”‚   â”œâ”€â”€ config.yaml
â”‚   â”œâ”€â”€ results.json
â”‚   â””â”€â”€ notes.md
â””â”€â”€ exp_002_hyperparam/     # å®éªŒ2ï¼šè¶…å‚æ•°è°ƒä¼˜
```

**è®°å½•å†…å®¹**:
- å®éªŒé…ç½®
- ç»“æœæ•°æ®
- è§‚å¯Ÿå’Œç¬”è®°
- å¯è§†åŒ–å›¾è¡¨

### ğŸ“ deployment/ - éƒ¨ç½²ç›¸å…³

```
deployment/
â”œâ”€â”€ docker/                  # Dockerç›¸å…³æ–‡ä»¶
â”‚   â””â”€â”€ Dockerfile.prod     # ç”Ÿäº§ç¯å¢ƒDockerfile
â””â”€â”€ scripts/                 # éƒ¨ç½²è„šæœ¬
    â”œâ”€â”€ deploy.sh
    â””â”€â”€ start_service.sh
```

## æ–‡ä»¶å‘½åè§„èŒƒ

### Pythonæ–‡ä»¶
- ä½¿ç”¨å°å†™å­—æ¯å’Œä¸‹åˆ’çº¿ï¼š`text_encoder.py`
- ç±»åä½¿ç”¨å¤§é©¼å³°ï¼š`TextEncoder`
- å‡½æ•°åä½¿ç”¨å°å†™ä¸‹åˆ’çº¿ï¼š`load_audio()`

### é…ç½®æ–‡ä»¶
- ä½¿ç”¨å°å†™å­—æ¯å’Œè¿å­—ç¬¦ï¼š`default-config.yaml`
- æˆ–ä½¿ç”¨ä¸‹åˆ’çº¿ï¼š`default_config.yaml`

### æ•°æ®æ–‡ä»¶
- ä½¿ç”¨æœ‰æ„ä¹‰çš„åç§°ï¼š`speaker_001_utterance_001.wav`
- åŒ…å«å…ƒä¿¡æ¯ï¼š`train_batch_001.pkl`

## å·¥ä½œæµç¨‹

### 1. æ•°æ®å‡†å¤‡é˜¶æ®µ
```
data/raw/ â†’ scripts/preprocess/ â†’ data/processed/
```

### 2. è®­ç»ƒé˜¶æ®µ
```
data/processed/ â†’ scripts/train/train.py â†’ checkpoints/training/
```

### 3. æ¨ç†é˜¶æ®µ
```
checkpoints/pretrained/ â†’ scripts/inference/inference.py â†’ outputs/audio/
```

### 4. è¯„ä¼°é˜¶æ®µ
```
outputs/audio/ â†’ scripts/eval/evaluate.py â†’ outputs/logs/
```

## æœ€ä½³å®è·µ

1. **ç‰ˆæœ¬æ§åˆ¶**
   - ä½¿ç”¨Gitç®¡ç†ä»£ç 
   - å¤§æ–‡ä»¶ä½¿ç”¨Git LFS
   - æ•°æ®æ–‡ä»¶ä¸æäº¤åˆ°Git

2. **é…ç½®ç®¡ç†**
   - æ‰€æœ‰é…ç½®ä½¿ç”¨YAMLæ–‡ä»¶
   - ä¸åŒå®éªŒä½¿ç”¨ä¸åŒé…ç½®æ–‡ä»¶
   - é…ç½®æ–‡ä»¶åŒ…å«å®Œæ•´ä¿¡æ¯

3. **æ—¥å¿—è®°å½•**
   - ä½¿ç”¨TensorBoardè®°å½•è®­ç»ƒè¿‡ç¨‹
   - ä¿å­˜é‡è¦çš„ä¸­é—´ç»“æœ
   - è®°å½•å®éªŒå‚æ•°å’Œç»“æœ

4. **ä»£ç ç»„ç»‡**
   - ä¿æŒæ¨¡å—åŒ–
   - ç¼–å†™æ¸…æ™°çš„æ–‡æ¡£å­—ç¬¦ä¸²
   - ä½¿ç”¨ç±»å‹æç¤ºï¼ˆå¯é€‰ï¼‰

5. **æµ‹è¯•**
   - ä¸ºå…³é”®åŠŸèƒ½ç¼–å†™æµ‹è¯•
   - å®šæœŸè¿è¡Œæµ‹è¯•
   - ä¿æŒæµ‹è¯•ä»£ç ç®€æ´

## æ‰©å±•å»ºè®®

æ ¹æ®é¡¹ç›®éœ€è¦ï¼Œå¯ä»¥æ·»åŠ ï¼š
- `api/` - REST APIæœåŠ¡
- `web/` - Webå‰ç«¯
- `mobile/` - ç§»åŠ¨ç«¯åº”ç”¨
- `benchmarks/` - æ€§èƒ½åŸºå‡†æµ‹è¯•
