# IndexTTS2 训练配置文件

# 模型配置
model:
  name: IndexTTS2
  # 文本编码器
  text_encoder:
    hidden_dim: 256
    num_layers: 4
  # 语音编码器
  speech_encoder:
    hidden_dim: 256
    num_layers: 4
  # 索引机制
  index:
    codebook_size: 512
    codebook_dim: 256
  # 解码器
  decoder:
    hidden_dim: 256
    num_layers: 4
  # 声码器
  vocoder:
    type: "hifigan"  # 或其他声码器类型

# 数据配置
data:
  train_dir: "data/datasets/train"
  val_dir: "data/datasets/val"
  batch_size: 16
  num_workers: 4
  pin_memory: true
  
  # 音频配置
  audio:
    sample_rate: 22050
    n_mels: 80
    hop_length: 256
    win_length: 1024

# 训练配置
training:
  epochs: 100
  learning_rate: 0.0001
  weight_decay: 0.0001
  
  # 优化器
  optimizer:
    type: "adam"
    betas: [0.9, 0.999]
  
  # 学习率调度
  scheduler:
    type: "step"
    step_size: 30
    gamma: 0.1
  
  # 保存配置
  save_interval: 10
  save_best: true
  checkpoint_dir: "checkpoints/training"
  
  # 日志配置
  log_interval: 100
  log_dir: "outputs/logs"
  
  # 验证配置
  val_interval: 5
  val_samples: 5

# 损失配置
loss:
  reconstruction_weight: 1.0
  contrastive_weight: 0.1
  perceptual_weight: 0.5

# 设备配置
device:
  use_gpu: true
  gpu_ids: [0]
  mixed_precision: false
